---
title: '8: Web Security Model'
layout: posts
---

Web sovellusten turvalliseksi tekeminen on erittäin haastavaa ellei jopa mahdotonta. Yksi syy tälle on, että selainten toimintaan liittyy todella monta ostaa: JavaScript, jQuery, DOM, AJAX, geolokaatio, HTML, mainokset jne. Lisäksi jokaisella selaimella on omat oikkunsa, mikä myöskin hankaloittaa turvallisuuden takaamista. 
 
Web sovelluksien turvallisuutta pyritään korottamaan ns. **saman alkuperän linjauksen** (engl. *same origin policy*) avulla. Perimmäisenä ajatuksena tässä on, että kaksi eri nettisivua eivät voisi muuttaa toisiaan. Tämä pyritään saavuttamaan asettamalla kullekin sovelluksen resurssille alkuperä, joka koostuu resurssin verkkoprotokollasta, isäntänimestä ja portista. Mikäli kahdella resurssilla on sama alkuperä, ne voivat vuorovaikuttaa esteettä, mutta muussa tapauksessa toisen osapuolen muokkaaminen on oletuksena estetty.
 
Yksityiskohtaisemmin saman alkuperän linjauksessa on neljä pääideaa: Ensimmäisenä jokaisella alkuperällä on asiakkaan puolella joitakin resursseja, esimerkiksi evästeitä, tila näytöllä tai JavaScript nimiavaruus. Toisena jokaisen sovelluksen pääosan (engl. *frame*) alkuperä määräytyy sen URLin perustella. Kolmantena määrätään, että skriptit suoritetaan niiden sovelluksen pääosan auktoriteetilla. Neljäs oletus on, että passiivinen sisältö, kuten kuvat ja css, eivät saa mitään auktoriteettia. Tämän ansiosta esimerkiksi jotakin skriptiä ei voi naamioida kuvaksi, ja näin ohittaa suojaukset.
 
Web sovelluksen eri osia koskee useat säännöt liittyen niiden alkuperään. Nämä säännöt muun muassa määräävät, mitkä osat voivat vuorovaikuttaa keskenään ja mistä näiden osien alkuperä tulee. Säännöissä myös määrätään, miten yksittäinen sovelluksen pääosa saa esittää ja käsitellä erinäisiä resursseja. Sivu voi esimerkiksi käyttää ulkopuolisia kuvia ja css:ää, mutta se ei saa katsoa näiden sisältöä. Vastaava lähestymistapa on käytössä myös JavaScript-tiedostojen kanssa. Usein on kuitenkin suhteellisen helppoa päätellä varsinkin JavaScript-tiedostojen sisältö, sillä voidaan hyödyntää vaikka funktioiden *toString*( )-metodia. 
 
Alkuperään liittyvistä tarkoista säännöistä huolimatta on silti olemassa useita mahdollisia hyökkäyksiä. Esimerkiksi *cross-site scripting* -hyökkäyksessä sivulla pyritään ajamaan JavaScriptiä HTML *script*-tagin avulla. Toinen, hieman monimutkaisempi hyökkäys pyrkii ohittamaan saman alkuperän linjauksen kontrolloimalla *domain*-nimiä, jolloin hyökkääjä voisi ajaa JavaScriptiä uhrin sivulla tämän sivun oikeuksilla. Kolmas hyökkäyskeino on ns. klikkauksen kaappaus, joka perustuu siihen, että esimerkiksi linkin päälle asetetaan vaarallinen, mutta näkymätön linkki. Lisäksi hieman erilainen vaara esiintyy huijaussivujen muodossa. Nämä usein käyttävät hyvin samankaltaista URLia kuin niiden matkinnan kohteena olevat sivut ja saavat ihmisiä sivulle esimerkiksi kirjoitusvirheiden kautta.
 
 
### Ajatuksia materiaalista
 
Tällä luennolla päästiin itseäni suuresti kiinnostavan aiheen pariin eli web sovelluksiin. Minulla oli myös jonkin verran enemmän esitietoja luennolla käsiteltävistä asioista, joten ymmärtäminen oli huomattavasti helpompaa aikaisempiin luentoihin verrattuna. Lisäksi luennoitsija selkeästi oletti vähemmän esitietoja web sovelluksiin liittyvistä asioista kuin esimerkiksi C ja Assembler asioista, minkä vuoksi monia suhteellisen yksinkertaisiakin asioita selitettiin auki. Olisipa näin ollut aikaisemmillakin luennoilla…
 
Tämän luennon myötä edelleen kasvaa se tunne, että miten on ikinä mahdollista luoda käyttäjille turvallista web sovellusta. Sovellukset koostuvat yksinkertaisimmillaankin todella monesta osasta puhumattakaan siitä, että alkaisi hyödyntämään ulkoisia kirjastoja yms. Pitäisikö sitä osata kaikki nämä osat läpikotaisin ja lisäksi niihin liittyvät turvallisuusriskit, sekä vielä että miten näiltä turvallisuusriskeiltä suojaudutaan? Luentoon liittyvä lukumateriaali oli tämän kannalta varsin mielenkiintoinen, sillä siinä lueteltiin selkeästi kaikkein yleisimmät riskit, niiden syyt ja suojautumiskeinot. Silti, itseäni huomattavasti osaavammat ja kokeneemmat ohjelmistokehittäjät ovat mokanneen hyvin simppeleitäkin asioita, esimerkkinä muutama vuosi sitten Twitterin TweetDeckissä ollut XSS-haavoittuvuus.
 
Täytyy lopuksi myöntää, että en ihan täydellisesti kyllä tajunnut, että mitä tarkoitetaan nettisivujen “*frameilla*”. Googlestakaan ei tässä yhteydessä ollut juurikaan apua. Olisi kiva, että luennolla olisi näytetty näitä web sovellusten eri osia suoraan selaimesta sen sijaan, että luennoitsija piirtää yksinkertaistetun kuvan taululle.